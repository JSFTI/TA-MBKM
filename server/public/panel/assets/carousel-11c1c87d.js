import{f as X,W as G,r as g,D as p,af as H,aj as M,ak as W,X as q,v as J,a3 as K,a4 as P,o as d,t as x,w as n,b as i,x as u,c as m,y as Q,a as s,z as D,T as Y,B as Z,al as V,a8 as ee,a9 as ae,h as te}from"./vendor-4d8d9704.js";import{l as w}from"./lodash-c57cc56e.js";import{d as T}from"./dayjs.min-dc33f0bd.js";import{u as se}from"./main-ddb67970.js";const le={class:"p-5"},oe={key:0},ne=["src"],re={class:"text-center"},ie={key:1,class:"text-center text-3xl"},ce={class:"text-center mt-10"},de=i("div",{class:"i-mdi:upload text-7xl text-dark"},null,-1),ue=i("div",{class:"select-none text-dark font-bold"}," Drop Carousel ",-1),pe=[de,ue],fe={key:0,class:"flex gap-5 flex-wrap"},ve=["src"],me={class:"text-center"},_e={key:1,class:"text-3xl text-center"},ye=X({__name:"carousel",setup(ge){const j=G(),B=se(),r=g([]),l=g([]),f=g(!1),A=g(!1);function N(e){e.preventDefault()}function $(e){var a;e.preventDefault(),(((a=e.dataTransfer)==null?void 0:a.items.length)??0)!==0&&(f.value=!0)}function z(e){e.preventDefault(),e.target.id==="carousel-card"&&(f.value=!1)}function E(e){var a;e.preventDefault(),f.value=!1,(a=e.dataTransfer)!=null&&a.files.length&&C(e.dataTransfer.files)}function I(e){const a=e.target;a.files&&(C(a.files),a.value="")}function C(e){const a=new FormData;for(let t=0;t<e.length;t++)a.append("images[]",e[t],e[t].name);p.post("carousels",a).then(t=>{l.value.push(...t.data),l.value=w.exports.sortBy(l.value,[c=>{var v;return(v=c.filename)==null?void 0:v.toLowerCase()}])})}function L(e){p.put(`/carousels/${e.id}/approved`).then(a=>{Object.assign(e,a.data),r.value.push(e),l.value=l.value.filter(t=>!t.approved)})}function O(e){p.delete(`/carousels/${e.id}/approved`).then(a=>{Object.assign(e,a.data),r.value=r.value.filter(t=>t.id!==e.id),l.value.push(e),l.value=l.value.filter(t=>!t.approved)})}function S(){const e=r.value.map((a,t)=>(a.priority=t+1,a));p.patch("carousels/approved",e).then(()=>{r.value=e,j.success("Carousel order updated.")})}function b(e){p.delete(`/carousels/${e}`).then(()=>{r.value=r.value.filter(a=>a.id!==e),l.value=l.value.filter(a=>a.id!==e)})}p.get("carousels").then(e=>{l.value=e.data,r.value=l.value.filter(a=>a.approved).map(a=>({...a,priority:a.priority??Number.MAX_SAFE_INTEGER})).sort((a,t)=>a.priority-t.priority||T(a.approved_at).diff(T(t.approved_at)))});const y=H(()=>w.exports.sortBy(l.value.filter(e=>!e.approved),[e=>{var a;return(a=e.filename)==null?void 0:a.toLowerCase()}]));return(e,a)=>{const t=M,c=te,v=W,_=q,F=J("Draggable"),U=K,R=P;return d(),x(_,{title:"Carousel Setting"},{default:n(()=>{var k;return[i("div",le,[((k=u(B).role)==null?void 0:k.name)==="admin"?(d(),m("div",oe,[u(r).length>0?(d(),x(F,{key:0,modelValue:u(r),"onUpdate:modelValue":a[0]||(a[0]=o=>Q(r)?r.value=o:null),"item-key":"id",class:"flex gap-5 flex-wrap justify-center",onChange:a[1]||(a[1]=o=>A.value=!0)},{item:n(({element:o})=>[s(_,{class:"cursor-pointer rounded-0 !w-50 !flex items-center gap-5 flex-col",flat:""},{default:n(()=>[i("img",{draggable:"false",class:"object-cover !w-50 aspect-ratio-16/9",src:o.url},null,8,ne),s(t,{class:"!py-0"},{default:n(()=>[i("p",re,D(o.filename),1)]),_:2},1024),s(v,{class:"!py-0 flex gap-5 justify-center"},{default:n(()=>[s(c,{icon:"i-mdi:cancel",size:"small",class:"!bg-danger !text-black",onClick:h=>O(o)},null,8,["onClick"]),s(c,{icon:"i-mdi:trash-can",size:"small",class:"!bg-danger !text-black",onClick:h=>b(o.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:1},8,["modelValue"])):(d(),m("div",ie," No Approved Carousel ")),i("div",ce,[s(c,{color:"primary",onClick:S},{default:n(()=>[Y(" Update Carousel Order ")]),_:1})])])):Z("",!0),s(_,{id:"carousel-card",class:V({"is-file-hovering":u(f)}),onDragover:N,onDragenter:$,onDragleave:z,onDrop:E},{default:n(()=>[i("div",{class:V(["pointer-events-none absolute z-100 top-0 left-0 w-full h-full bg-light bg-opacity-50 items-center justify-center flex flex-col opacity-0 transition",{"!opacity-100":u(f)}])},pe,2),s(R,{title:"Carousels",color:"rgba(0,0,0,0)"},{default:n(()=>[s(U,null,{default:n(()=>[s(c,{icon:"i-ic:round-add",class:"!bg-success !text-white",tag:"label",for:"carousel"}),i("input",{id:"carousel",type:"file",class:"w-0 h-0 invisible m-0 p-0",multiple:"",accept:"image/*",onChange:I},null,32)]),_:1})]),_:1}),s(t,null,{default:n(()=>[u(y).length>0?(d(),m("div",fe,[(d(!0),m(ee,null,ae(u(y),o=>(d(),x(_,{key:o.id,class:"rounded-0 !w-60 !flex items-center gap-5 flex-col",flat:""},{default:n(()=>[i("img",{draggable:"false",class:"object-cover !w-60 aspect-ratio-16/9",src:o.url},null,8,ve),s(t,{class:"!py-0"},{default:n(()=>[i("p",me,D(o.filename),1)]),_:2},1024),s(v,{class:"!py-0 flex gap-5"},{default:n(()=>[s(c,{icon:"i-mdi:check",size:"small",class:"!bg-success !text-black",onClick:h=>L(o)},null,8,["onClick"]),s(c,{icon:"i-mdi:trash-can",size:"small",class:"!bg-danger !text-black",onClick:h=>b(o.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1024))),128))])):(d(),m("div",_e," No Available Carousel "))]),_:1})]),_:1},8,["class"])])]}),_:1})}}});export{ye as default};
//# sourceMappingURL=carousel-11c1c87d.js.map
