import{f as k,P as A,r as L,D as d,a3 as R,a4 as H,ak as O,X as y,v as S,aj as I,o as g,t as T,w as s,b as u,al as C,x as l,a as o,c as $,B as U,h as w,a0 as W,W as X,T as q,a8 as G}from"./vendor-d8963f8a.js";import{l as J}from"./lodash-89c1e3b6.js";import{_ as K}from"./ProductDetailForm.vue_vue_type_script_setup_true_lang-82e4314e.js";import"./ACurrencyInput.vue_vue_type_script_setup_true_lang-cebbc278.js";import"./main-38cd24a7.js";const M=u("div",{class:"i-mdi:upload text-7xl text-dark"},null,-1),Q=u("div",{class:"select-none text-dark font-bold"}," Drop Image ",-1),Y=[M,Q],Z=["src"],ee={key:1,class:"text-3xl text-center py-5 font-bold"},te=k({__name:"ProductImages",props:{id:null},setup(m){const r=m,a=A({thumbnail_id:null,images:[]}),i=L(!1);function _(e){e.preventDefault()}function p(e){var t;e.preventDefault(),(((t=e.dataTransfer)==null?void 0:t.items.length)??0)!==0&&(i.value=!0)}function D(e){e.preventDefault(),e.target.id==="image-bag"&&(i.value=!1)}function h(e){var t;e.preventDefault(),i.value=!1,(t=e.dataTransfer)!=null&&t.files.length&&f(e.dataTransfer.files)}function b(e){const t=e.target;t.files&&(f(t.files),t.value="")}function f(e){const t=new FormData;for(let n=0;n<e.length;n++)t.append("images[]",e[n],e[n].name);d.post(`products/${r.id}/images`,t).then(n=>{a.images.push(...n.data)})}function x(e){d.delete(`/product-images/${e}`).then(()=>{a.images=a.images.filter(t=>t.id!==e)})}function v(e){a.images=e.map((t,n)=>({...t,priority:n+1})),d.patch(`/products/${r.id}/images`,a.images)}function B(e){d.put(`/products/${r.id}/thumbnail`,{thumbnail_id:e}).then(()=>{a.thumbnail_id=e})}return d.get(`/products/${r.id}`,{params:{select:"id,thumbnail_id",relations:["images"]}}).then(e=>{Object.assign(a,J.exports.pick(e.data,["thumbnail_id","images"]))}),(e,t)=>{const n=w,E=R,P=H,N=O,V=y,j=S("Draggable"),z=I;return g(),T(V,{id:"image-bag",class:C({"is-file-hovering":l(i)}),onDragover:_,onDragenter:p,onDragleave:D,onDrop:h},{default:s(()=>[u("div",{class:C(["pointer-events-none absolute z-100 top-0 left-0 w-full h-full bg-light bg-opacity-50 items-center justify-center flex flex-col opacity-0 transition",{"!opacity-100":l(i)}])},Y,2),o(P,{title:"Product Images",color:"rgba(0,0,0,0)"},{default:s(()=>[o(E,null,{default:s(()=>[o(n,{icon:"i-mdi:plus",tag:"label",class:"!bg-success !text-white",for:"images"}),u("input",{id:"images",type:"file",class:"w-0 h-0 invisible m-0 p-0",multiple:"",accept:"image/*",onChange:b},null,32)]),_:1})]),_:1}),o(z,null,{default:s(()=>[l(a).images.length>0?(g(),T(j,{key:0,"model-value":l(a).images,class:"flex gap-5 flex-wrap","onUpdate:modelValue":v},{item:s(({element:c})=>[o(V,{class:C(["rounded-0 !w-60 !flex items-center gap-5 flex-col",c.id===l(a).thumbnail_id?"border-2 border-gray":""]),flat:""},{default:s(()=>[u("img",{draggable:"false",class:"object-cover !w-60 aspect-ratio-16/9",src:c.url},null,8,Z),o(N,{class:"!py-0 flex gap-5"},{default:s(()=>[o(n,{icon:c.id===l(a).thumbnail_id?"i-mdi:image-off":"i-mdi:file-image-box",size:"small",color:"primary",onClick:F=>B(c.id===l(a).thumbnail_id?null:c.id)},null,8,["icon","onClick"]),o(n,{icon:"i-mdi:trash-can",size:"small",class:"text-danger",onClick:F=>x(c.id)},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["class"])]),_:1},8,["model-value"])):l(a).images.length===0?(g(),$("div",ee," No Images Found ")):U("",!0)]),_:1})]),_:1},8,["class"])}}}),ae={class:"mt-5 text-center"},re=k({__name:"[productId]",props:{productId:null},setup(m){const r=m,a=W(),i=X();function _(){d.delete(`/products/${r.productId}`).then(()=>{a.push("/products")}).catch(p=>{i.error(p.response.data.message)})}return(p,D)=>{const h=K,b=I,f=y,x=te,v=w;return g(),$(G,null,[o(f,{title:"Edit Product"},{default:s(()=>[o(b,null,{default:s(()=>[o(h,{id:+m.productId},null,8,["id"])]),_:1})]),_:1}),o(x,{id:+m.productId,class:"mt-5"},null,8,["id"]),u("div",ae,[o(v,{color:"danger",onClick:_},{default:s(()=>[q(" DELETE ")]),_:1})])],64)}}});export{re as default};
//# sourceMappingURL=_productId_-a7e854a1.js.map
