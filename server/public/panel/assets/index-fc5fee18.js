import{_ as ce}from"./ACurrencyInput.vue_vue_type_script_setup_true_lang-c45a78ab.js";import{f as G,P as J,r as h,D,a0 as $,aw as K,R as ee,ax as me,ay as H,o as u,c as p,b as r,a as t,w as g,A as Y,x as l,y as j,af as le,j as pe,h as N,a2 as ge,aA as fe,a4 as O,a6 as ve,a7 as _e,Q as Ve,v as be,Y as he,Z as xe,a8 as ke,a9 as ye,aj as Ce,X as Se,t as Q,B as A,ac as I,ab as z,al as W,ad as we}from"./vendor-d25d14c9.js";import{l as P}from"./lodash-11bfcbd5.js";import{u as Me,F as X,c as Ue,g as Te}from"./index.esm-6cf26349.js";import{d as Z}from"./dayjs.min-b39c2c8f.js";import{u as $e}from"./main-eee8a3c1.js";const ze={class:"flex flex-col gap-2"},je={class:"flex flex-col md:flex-row gap-5"},Pe={class:"flex flex-col md:flex-row gap-5"},De={class:"flex flex-col md:flex-row gap-5"},Fe={class:"grid grid-cols-1 md:grid-cols-2"},Re={class:"grid grid-cols-1 md:grid-cols-2"},Be={class:"flex justify-center gap-10"},Ie=r("div",{class:"i-mdi:filter text-2xl"},null,-1),Ye=r("div",{class:"i-mdi:filter-remove text-2xl"},null,-1),Ae=G({__name:"ComplexProductFilter",props:{filters:null},emits:["update:filters"],setup(E,{emit:c}){const C=E,o=J(P.exports.cloneDeep(C.filters)),F=h([]),V=h([]),S=le(s=>{if(s.length===0){V.value=[];return}D.get("tags",{params:{search:s,limit:10}}).then(a=>{V.value=a.data.filter(_=>{var e;return!((e=o.tags)!=null&&e.includes(_.name))})})},200);function U(){Object.assign(o,{categories:[],tags:[],price:void 0,stock:void 0,published:null}),c("update:filters",o)}function T(){c("update:filters",o)}D.get("categories").then(s=>{F.value=s.data});const d=$({get(){var s;return((s=o.price)==null?void 0:s.gte)??null},set(s){o.price={...o.price,gte:s??void 0}}}),v=$({get(){var s;return((s=o.price)==null?void 0:s.lte)??null},set(s){o.price={...o.price,lte:s??void 0}}}),x=$({get(){var s;return typeof o.stock=="string"?null:((s=o.stock)==null?void 0:s.gte)??null},set(s){s!=null&&(o.stock={...typeof o.stock=="object"?o.stock:{},gte:s??void 0})}}),k=$({get(){var s;return typeof o.stock=="string"?null:((s=o.stock)==null?void 0:s.lte)??null},set(s){s!=null&&(o.stock={...typeof o.stock=="object"?o.stock:{},lte:s??void 0})}}),R=$(()=>{var a,_;const{filters:s}=C;return((a=s.categories)==null?void 0:a.length)||((_=s.tags)==null?void 0:_.length)||typeof s.stock!="object"&&s.price!=null||!P.exports.isEmpty(s.price)||typeof s.stock!="object"&&s.stock!=null||!P.exports.isEmpty(s.stock)||s.published!==null});return(s,a)=>{const _=K,e=ee,n=pe,b=me,w=ce,M=H,B=N;return u(),p("div",ze,[r("div",je,[t(e,{modelValue:l(o).categories,"onUpdate:modelValue":a[0]||(a[0]=i=>l(o).categories=i),class:"w-full md:w-1/2",multiple:"",items:l(F),"closable-chips":"","item-title":"name","item-value":"name",label:"Category",chips:"",clearable:"","hide-details":""},{chip:g(({props:i,item:y})=>[t(_,Y(i,{text:y.value}),null,16,["text"])]),_:1},8,["modelValue","items"]),t(b,{modelValue:l(o).tags,"onUpdate:modelValue":a[1]||(a[1]=i=>l(o).tags=i),class:"w-full md:w-1/2",items:l(V),"closable-chips":"",multiple:"","item-title":"name","item-value":"name",clearable:"",label:"Tags",chips:"","hide-details":"","onUpdate:search":l(S)},{chip:g(({props:i,item:y})=>[t(_,Y(i,{text:y.value}),null,16,["text"])]),item:g(({props:i,item:y})=>[t(n,Y(i,{title:y.value}),null,16,["title"])]),_:1},8,["modelValue","items","onUpdate:search"])]),r("div",Pe,[t(w,{modelValue:l(d),"onUpdate:modelValue":a[2]||(a[2]=i=>j(d)?d.value=i:null),label:"Min. Price","hide-details":""},null,8,["modelValue"]),t(w,{modelValue:l(v),"onUpdate:modelValue":a[3]||(a[3]=i=>j(v)?v.value=i:null),label:"Max. Price","hide-details":""},null,8,["modelValue"])]),r("div",De,[t(w,{modelValue:l(x),"onUpdate:modelValue":a[4]||(a[4]=i=>j(x)?x.value=i:null),disabled:l(o).stock!=null&&["number","string"].includes(typeof l(o).stock),label:"Min. Stock","hide-details":""},null,8,["modelValue","disabled"]),t(w,{modelValue:l(k),"onUpdate:modelValue":a[5]||(a[5]=i=>j(k)?k.value=i:null),disabled:l(o).stock!=null&&["number","string"].includes(typeof l(o).stock),label:"Max. Stock","hide-details":""},null,8,["modelValue","disabled"])]),r("div",Fe,[t(M,{modelValue:l(o).stock,"onUpdate:modelValue":a[6]||(a[6]=i=>l(o).stock=i),box:"","true-value":0,"false-value":{},label:"Stock empty","hide-details":""},null,8,["modelValue"]),t(M,{modelValue:l(o).stock,"onUpdate:modelValue":a[7]||(a[7]=i=>l(o).stock=i),box:"","true-value":"infinite","false-value":{},label:"Stock infinite","hide-details":""},null,8,["modelValue"])]),r("div",Re,[t(M,{modelValue:l(o).published,"onUpdate:modelValue":a[8]||(a[8]=i=>l(o).published=i),box:"","true-value":1,"false-value":null,label:"Show published products","hide-details":""},null,8,["modelValue"]),t(M,{modelValue:l(o).published,"onUpdate:modelValue":a[9]||(a[9]=i=>l(o).published=i),box:"","true-value":"0","false-value":null,label:"Show unpublished products","hide-details":""},null,8,["modelValue"])]),r("div",Be,[t(B,{color:"primary",size:"large",disabled:l(P.exports.isEqual)(C.filters,l(o)),onClick:a[10]||(a[10]=i=>T())},{default:g(()=>[Ie]),_:1},8,["disabled"]),t(B,{color:"danger",size:"large",disabled:!l(R),onClick:a[11]||(a[11]=i=>U())},{default:g(()=>[Ye]),_:1},8,["disabled"])])])}}}),He={class:"flex flex-col md:items-center md:flex-row md:px-4 gap-5 mb-5"},Ne={class:"flex gap-5 items-center"},Ee={class:"w-30"},Le={class:"flex gap-5 ml-auto"},qe={class:"w-100"},Oe={key:0,class:"mb-5"},Qe={class:"relative rounded overflow-x-auto w-full"},We=["colSpan","onClick"],Xe={class:"flex items-center gap-4"},Ze={key:1},Ge=["colspan"],Je={key:1},Ke=["colspan"],el={class:"mt-5"},il=G({__name:"index",setup(E){const c=Ue(),C=ge(),o=$e(),F=h([]),V=h(!1),S=h(!0),U=h(!1),T=h(null),d=J({page:1,limit:10,...P.exports.cloneDeep(C.currentRoute.value.query)}),v=h([]),x=[c.display({id:"action",maxSize:40,header:"",cell:e=>t("div",{class:"flex justify-center"},[t(N,{to:`/products/${e.row.original.id}`,icon:"i-mdi:magnify"},null)])}),c.display({id:"published",maxSize:50,header:"Published",cell:e=>{var n;return t("div",{class:"flex justify-center"},[((n=o.role)==null?void 0:n.name)==="admin"?t(H,{"hide-details":!0,inline:!0,class:"place-items-center",onchange:b=>s(e.row.original,!!b.target.checked),"true-value":!0,"model-value":e.row.original.published},null):t("div",{class:e.row.original.published?"i-mdi:check":""},null)])}}),c.accessor("thumbnail",{header:"Thumbnail",id:"thumbnail",minSize:200,cell:e=>{var b;return e.getValue()?t(fe,{contain:!0,src:(b=e.getValue())==null?void 0:b.url,class:"h-25"},null):"No thumbnail set"}}),c.accessor("name",{header:"Name",id:"name",minSize:400,cell:e=>e.renderValue()}),c.accessor("category",{header:"Category",id:"category",minSize:100,cell:e=>{var n;return(n=e.getValue())==null?void 0:n.name}}),c.accessor("price",{header:"Price",id:"price",minSize:100,enableSorting:!0,cell:e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(e.getValue())}),c.accessor("stock",{header:"Stock",id:"stock",minSize:25,enableSorting:!0,cell:e=>e.getValue()??"-"}),c.accessor("tags",{header:"Tags",id:"tags",minSize:500,cell:e=>t("div",{class:"flex gap-2 flex-wrap"},[(e.getValue()??[]).map(n=>t(K,{text:n.name},null))])}),c.accessor("created_at",{id:"created_at",header:"Created At",minSize:200,cell:e=>{const n=Z(e.getValue());return t("div",null,[t("div",null,[n.format("DD MMMM YYYY")]),t("div",null,[n.format("HH:MM:ss")])])}}),c.accessor("updated_at",{id:"updated_at",header:"Updated At",minSize:200,cell:e=>{if(!e.getValue())return"-";const n=Z(e.getValue());return t("div",null,[t("div",null,[n.format("DD MMMM YYYY")]),t("div",null,[n.format("HH:MM:ss")])])}})],k=Me({columns:x,get data(){var e;return((e=T.value)==null?void 0:e.data)??[]},state:{get sorting(){return v.value}},onSortingChange:e=>{v.value=typeof e=="function"?e(v.value):e},defaultColumn:{enableSorting:!1},getCoreRowModel:Te()});function R(){S.value=!0,U.value=!1,D.get("products",{params:{...d,relations:["thumbnail"]}}).then(e=>{T.value=e.data}).catch(()=>{U.value=!0}).finally(()=>{S.value=!1})}function s(e,n){D[n?"put":"delete"](`products/${e.id}/published`).then(()=>{e.published=n})}function a(e){Object.assign(d,e)}const _=le(e=>{d.search=e||void 0},200);return O(()=>v.value,()=>{let e="";for(const n of v.value)e+=`${(n.desc?"-":"+")+n.id},`;d.sortBy=e.slice(0,-1)||null}),O(d,()=>{C.replace({query:{...d}}),R()}),R(),D.get("categories").then(e=>{F.value=e.data}),(e,n)=>{const b=N,w=ve,M=_e,B=ee,i=Ve,y=H,te=Ae,oe=be("CollapseTransition"),se=he,ae=xe,ne=ke,ie=ye,re=Ce,de=Se;return u(),Q(de,null,{default:g(()=>[t(M,{title:"Products",color:"rgba(0,0,0,0)"},{default:g(()=>[t(w,null,{default:g(()=>[t(b,{icon:"i-ic:round-add",class:"!bg-success !text-white",to:"/products/new"})]),_:1})]),_:1}),t(re,null,{default:g(()=>{var L;return[r("div",He,[r("div",Ne,[r("div",Ee,[t(B,{modelValue:l(d).limit,"onUpdate:modelValue":n[0]||(n[0]=f=>l(d).limit=f),class:"w-30",items:[10,25,50,100],label:"Limit","hide-details":""},null,8,["modelValue"])])]),r("div",Le,[r("div",qe,[t(i,{"model-value":l(d).search,label:"Search","hide-details":"","onUpdate:modelValue":l(_)},null,8,["model-value","onUpdate:modelValue"])]),r("div",null,[t(y,{modelValue:l(V),"onUpdate:modelValue":n[1]||(n[1]=f=>j(V)?V.value=f:null),"true-icon":"i-mdi:filter-cog","false-icon":"i-mdi:filter-cog-outline","hide-details":""},null,8,["modelValue"])])])]),r("div",null,[t(oe,null,{default:g(()=>[l(V)?(u(),p("div",Oe,[t(te,{filters:l(d),"onUpdate:filters":a},null,8,["filters"])])):A("",!0)]),_:1}),r("div",Qe,[t(ae,{"model-value":l(S),persistent:"",contained:"",class:"items-center justify-center"},{default:g(()=>[t(se,{size:"64",color:"primary",indeterminate:""})]),_:1},8,["model-value"]),t(ne,null,{default:g(()=>[r("thead",null,[(u(!0),p(z,null,I(l(k).getHeaderGroups(),f=>(u(),p("tr",{key:f.id},[(u(!0),p(z,null,I(f.headers,m=>(u(),p("th",{key:m.id,colSpan:m.colSpan,class:W({"cursor-pointer select-none":m.column.getCanSort()}),style:we({minWidth:`${m.column.getSize()}px`}),onClick:ue=>{var q;return(q=m.column.getToggleSortingHandler())==null?void 0:q(ue)}},[r("div",Xe,[m.isPlaceholder?A("",!0):(u(),Q(l(X),{key:0,render:m.column.columnDef.header,props:m.getContext()},null,8,["render","props"])),r("div",{class:W({asc:"i-mdi:chevron-up",desc:"i-mdi:chevron-down"}[m.column.getIsSorted()])},null,2)])],14,We))),128))]))),128))]),r("tbody",null,[l(U)?(u(),p("tr",Je,[r("td",{colspan:x.length,class:"text-center font-bold !text-2xl"}," Server Error ",8,Ke)])):(u(),p(z,{key:0},[l(k).getRowModel().rows.length>0?(u(!0),p(z,{key:0},I(l(k).getRowModel().rows,f=>(u(),p("tr",{key:f.id},[(u(!0),p(z,null,I(f.getVisibleCells(),m=>(u(),p("td",{key:m.id},[t(l(X),{render:m.column.columnDef.cell,props:m.getContext()},null,8,["render","props"])]))),128))]))),128)):l(S)?A("",!0):(u(),p("tr",Ze,[r("td",{colspan:x.length,class:"text-center font-bold !text-2xl"}," No Data Available ",8,Ge)]))],64))])]),_:1})])]),r("div",el,[t(ie,{"model-value":l(d).page??0,length:(L=l(T))==null?void 0:L.last_page,rounded:"circle","onUpdate:modelValue":n[2]||(n[2]=f=>l(d).page=f)},null,8,["model-value","length"])])]}),_:1})]),_:1})}}});export{il as default};
//# sourceMappingURL=index-fc5fee18.js.map
