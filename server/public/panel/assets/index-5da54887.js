import{_ as ye}from"./ACurrencyInput.vue_vue_type_script_setup_true_lang-ad6340cd.js";import{ag as te,Z as ae,_ as oe,ab as Ce,x as n,f as Se,r as V,a,am as E,ap as we,ak as W,C as P,$ as Q,a1 as ke,a2 as Pe,P as Me,O as Te,al as Ue,W as ze,X as De,a3 as Oe,a4 as Re,ah as Ie,U as je,o as d,t as j,w as m,b as u,y as M,a9 as A,A as F,c as p,a7 as T,a6 as U,aq as Ae,a8 as Fe,ac as X,h as He,j as Ne}from"./vendor-58478656.js";import{u as Ye,F as Z,c as qe,g as Be,a as $e}from"./index.esm-feed947a.js";import{d as G}from"./dayjs.min-f8115ce8.js";var Le=Object.defineProperty,Ee=Object.defineProperties,We=Object.getOwnPropertyDescriptors,J=Object.getOwnPropertySymbols,Qe=Object.prototype.hasOwnProperty,Xe=Object.prototype.propertyIsEnumerable,K=(i,o,r)=>o in i?Le(i,o,{enumerable:!0,configurable:!0,writable:!0,value:r}):i[o]=r,ee=(i,o)=>{for(var r in o||(o={}))Qe.call(o,r)&&K(i,r,o[r]);if(J)for(var r of J(o))Xe.call(o,r)&&K(i,r,o[r]);return i},le=(i,o)=>Ee(i,We(o));function g(i,o,{mode:r="replace",route:b=ae(),router:x=oe()}={}){return te({get(){const c=b.query[i];return c==null?o??null:Array.isArray(c)?c.filter(Boolean):c},set(c){Ce(()=>{x[n(r)](le(ee({},b),{query:le(ee({},b.query),{[i]:c===o||c===null?void 0:c})}))})}})}const Ze={class:"flex gap-5 px-4 items-center mb-5"},Ge={class:"w-30"},Je={class:"!w-100 ml-auto"},Ke={class:"flex gap-5"},el={class:"flex gap-5"},ll={class:"flex gap-5"},tl={class:"relative rounded overflow-x-auto w-full"},al=["colSpan","onClick"],ol={key:1},nl=["colspan"],sl={class:"mt-5"},dl=Se({__name:"index",setup(i){const o=qe(),r=ae(),b=oe(),x=V([]),c=V([]),z=V(!1),y=V(!0),D=V(null),H=g("page","1"),O=g("limit","10"),R=g("search",null),C=g("categories",[]),_=g("tags",[]),f={min:g("price[gte]",null),max:g("price[lte]",null)},S={min:g("stock[gte]",null),max:g("stock[lte]",null)},h=V([]),N=[o.display({id:"published",maxSize:50,header:"Published",cell:l=>a("div",{class:"flex justify-center"},[a(E,{"hide-details":!0,inline:!0,class:"place-items-center",onchange:e=>ne(l.row.original,!!e.target.checked),"true-value":!0,"model-value":l.row.original.published},null)])}),o.accessor("thumbnail",{header:"Thumbnail",id:"thumbnail",minSize:100,cell:l=>{var v;return l.getValue()?a(we,{cover:!0,src:(v=l.getValue())==null?void 0:v.url},null):"No thumbnail set"}}),o.accessor("name",{header:"Name",id:"name",minSize:400,cell:l=>l.renderValue()}),o.accessor("category",{header:"Category",id:"category",minSize:100,cell:l=>{var e;return(e=l.getValue())==null?void 0:e.name}}),o.accessor("price",{header:"Price",id:"price",minSize:100,enableSorting:!0,cell:l=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR"}).format(l.getValue())}),o.accessor("stock",{header:"Stock",id:"stock",minSize:25,enableSorting:!0,cell:l=>l.getValue()??"-"}),o.accessor("tags",{header:"Tags",id:"tags",minSize:500,cell:l=>a("div",{class:"flex gap-2 flex-wrap"},[(l.getValue()??[]).map(e=>a(W,{text:e.name},null))])}),o.accessor("created_at",{id:"created_at",header:"Created At",minSize:200,cell:l=>{const e=G(l.getValue());return a("div",null,[a("div",null,[e.format("DD MMMM YYYY")]),a("div",null,[e.format("HH:MM:ss")])])}}),o.accessor("updated_at",{id:"updated_at",header:"Updated At",minSize:200,cell:l=>{if(!l.getValue())return"-";const e=G(l.getValue());return a("div",null,[a("div",null,[e.format("DD MMMM YYYY")]),a("div",null,[e.format("HH:MM:ss")])])}})],I=Ye({columns:N,get data(){var l;return((l=D.value)==null?void 0:l.data)??[]},state:{get sorting(){return h.value}},onSortingChange:l=>{h.value=typeof l=="function"?l(h.value):l},defaultColumn:{enableSorting:!1},getCoreRowModel:Be(),getSortedRowModel:$e()});function Y(){y.value=!0,P.get("products",{params:r.query}).then(l=>{D.value=l.data}).finally(()=>{y.value=!1})}function ne(l,e){P[e?"put":"delete"](`products/${l.id}/published`).then(()=>{l.published=e})}function se(){b.replace({query:{search:void 0,categories:[],tags:[],price:void 0,stock:void 0}})}const re=X(l=>{R.value=l||null},200),ue=X(l=>{if(l.length===0){c.value=[];return}P.get("tags",{params:{search:l,limit:10}}).then(e=>{c.value=e.data.filter(v=>{var w;return!((w=_.value)!=null&&w.includes(v.name))})})},200);Q(()=>r.query,()=>{Y()},{deep:!0}),Y(),P.get("categories").then(l=>{x.value=l.data});const ie=te(()=>{var l,e;return R.value!==null||(((l=C.value)==null?void 0:l.length)??0)>0||(((e=_.value)==null?void 0:e.length)??0)>0||f.min.value!==null||f.max.value!==null});return Q(h,()=>{console.log(h.value)}),(l,e)=>{const v=He,w=ke,ce=Pe,de=E,q=Me,me=Te,B=W,pe=Ne,ge=Ue,k=ye,ve=ze,_e=De,fe=Oe,Ve=Re,be=Ie,he=je;return d(),j(he,null,{default:m(()=>[a(ce,{title:"Products",color:"rgba(0,0,0,0)"},{default:m(()=>[a(w,null,{default:m(()=>[a(v,{icon:"i-ic:round-add",class:"!bg-success !text-white",to:"/products/new"})]),_:1})]),_:1}),a(be,null,{default:m(()=>{var $;return[u("div",Ze,[u("div",null,[a(de,{modelValue:n(z),"onUpdate:modelValue":e[0]||(e[0]=t=>M(z)?z.value=t:null),"true-icon":"i-mdi:filter-cog","false-icon":"i-mdi:filter-cog-outline",inline:"","hide-details":""},null,8,["modelValue"])]),n(ie)?(d(),j(v,{key:0,icon:"i-mdi:filter-remove",onClick:e[1]||(e[1]=t=>se())})):A("",!0),u("div",Ge,[a(q,{modelValue:n(O),"onUpdate:modelValue":e[2]||(e[2]=t=>M(O)?O.value=t:null),items:[10,25,50,100],label:"Limit","hide-details":""},null,8,["modelValue"])]),u("div",Je,[a(me,{"model-value":n(R),label:"Search","hide-details":"","onUpdate:modelValue":n(re)},null,8,["model-value","onUpdate:modelValue"])])]),u("div",null,[u("div",null,[u("div",Ke,[a(q,{modelValue:n(C),"onUpdate:modelValue":e[3]||(e[3]=t=>M(C)?C.value=t:null),class:"w-1/2",multiple:"",items:n(x),"closable-chips":"","item-title":"name","item-value":"name",label:"Category",chips:"",clearable:""},{chip:m(({props:t,item:s})=>[a(B,F(t,{text:s.value}),null,16,["text"])]),_:1},8,["modelValue","items"]),a(ge,{modelValue:n(_),"onUpdate:modelValue":[e[4]||(e[4]=t=>M(_)?_.value=t:null),e[5]||(e[5]=t=>_.value=t)],class:"w-1/2",items:n(c),"closable-chips":"",multiple:"","item-title":"name","item-value":"name",clearable:"",label:"Tags",chips:"","onUpdate:search":n(ue)},{chip:m(({props:t,item:s})=>[a(B,F(t,{text:s.value}),null,16,["text"])]),item:m(({props:t,item:s})=>[a(pe,F(t,{title:s.value}),null,16,["title"])]),_:1},8,["modelValue","items","onUpdate:search"])]),u("div",el,[a(k,{modelValue:f.min.value,"onUpdate:modelValue":e[6]||(e[6]=t=>f.min.value=t),label:"Min. Price"},null,8,["modelValue"]),a(k,{modelValue:f.max.value,"onUpdate:modelValue":e[7]||(e[7]=t=>f.max.value=t),label:"Max. Price"},null,8,["modelValue"])]),u("div",ll,[a(k,{modelValue:S.min.value,"onUpdate:modelValue":e[8]||(e[8]=t=>S.min.value=t),label:"Min. Stock"},null,8,["modelValue"]),a(k,{modelValue:S.max.value,"onUpdate:modelValue":e[9]||(e[9]=t=>S.max.value=t),label:"Max. Stock"},null,8,["modelValue"])])]),u("div",tl,[a(_e,{"model-value":n(y),persistent:"",contained:"",class:"items-center justify-center"},{default:m(()=>[a(ve,{size:"64",color:"primary",indeterminate:""})]),_:1},8,["model-value"]),a(fe,null,{default:m(()=>[u("thead",null,[(d(!0),p(U,null,T(n(I).getHeaderGroups(),t=>(d(),p("tr",{key:t.id},[(d(!0),p(U,null,T(t.headers,s=>(d(),p("th",{key:s.id,colSpan:s.colSpan,class:Ae({"cursor-pointer select-none":s.column.getCanSort()}),style:Fe({minWidth:`${s.column.getSize()}px`}),onClick:xe=>{var L;return(L=s.column.getToggleSortingHandler())==null?void 0:L(xe)}},[s.isPlaceholder?A("",!0):(d(),j(n(Z),{key:0,render:s.column.columnDef.header,props:s.getContext()},null,8,["render","props"]))],14,al))),128))]))),128))]),u("tbody",null,[n(I).getRowModel().rows.length>0?(d(!0),p(U,{key:0},T(n(I).getRowModel().rows,t=>(d(),p("tr",{key:t.id},[(d(!0),p(U,null,T(t.getVisibleCells(),s=>(d(),p("td",{key:s.id},[a(n(Z),{render:s.column.columnDef.cell,props:s.getContext()},null,8,["render","props"])]))),128))]))),128)):n(y)?A("",!0):(d(),p("tr",ol,[u("td",{colspan:N.length,class:"text-center font-bold !text-2xl"}," No Data Available ",8,nl)]))])]),_:1})])]),u("div",sl,[a(Ve,{"model-value":+n(H),length:($=n(D))==null?void 0:$.last_page,rounded:"circle","onUpdate:modelValue":e[10]||(e[10]=t=>H.value=t.toString())},null,8,["model-value","length"])])]}),_:1})]),_:1})}}});export{dl as default};
//# sourceMappingURL=index-5da54887.js.map
